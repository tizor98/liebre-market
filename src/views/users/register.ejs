<!DOCTYPE html>
<html lang="en">

<!-- Head -->
<%- include("../partials/head", {title: 'Register'}) %>

<body>
   
   <!-- Header -->
   <%- include("../partials/header") %>

   <div class="form-box">

      <div class="form-card">
         <form action="/users/register" method="post" class="form-create" enctype="multipart/form-data">

            <div class="div-form">
               <label for="email">Email</label>
               <input type="email" name="email" id="email" class="control-form" value=<%= locals.oldData && oldData.email ? oldData.email : null %> >
               <% if (locals.errors && errors.email) { %>
                  <div class="text-danger">
                     <label><%= errors.email.msg %></label>
                  </div>
               <% } %>
            </div>

            <div class="div-form">
               <label for="name">Name</label>
               <input type="text" name="name" id="name" class="control-form" value=<%= locals.oldData && oldData.name ? oldData.name : null %> >
               <% if (locals.errors && errors.name) { %>
                  <div class="text-danger">
                     <label><%= errors.name.msg %></label>
                  </div>
               <% } %>
            </div>

            <div class="div-form">
               <label for="surname">Surname</label>
               <input type="text" name="surname" id="surname" class="control-form" value=<%= locals.oldData && oldData.surname ? oldData.surname : null %> >
               <% if (locals.errors && errors.surname) { %>
                  <div class="text-danger">
                     <label><%= errors.surname.msg %></label>
                  </div>
               <% } %>
            </div>

            <div class="div-form">
               <label for="dni">DNI</label>
               <input type="number" name="dni" id="dni" class="control-form" minlength="6" value=<%= locals.oldData && oldData.dni ? oldData.dni : null %> >
               <% if (locals.errors && errors.dni) { %>
                  <div class="text-danger">
                     <label><%= errors.dni.msg %></label>
                  </div>
               <% } %>
            </div>

            <div class="div-form">
               <label for="address">Address</label>
               <input type="text" name="address" id="address" class="control-form" value=<%= locals.oldData && oldData.address ? oldData.address : null %>>
               <% if (locals.errors && errors.address) { %>
                  <div class="text-danger">
                     <label><%= errors.address.msg %></label>
                  </div>
               <% } %>
            </div>

            <div class="div-form">
               <label for="birthday">Birthday</label>
               <input type="date" name="birthday" id="birthday" placeholder="DD-MM-AAAA" class="control-form" value=<%= locals.oldData && oldData.birthday ? oldData.birthday : null %> >
               <% if (locals.errors && errors.birthday) { %>
                  <div class="text-danger">
                     <label><%= errors.birthday.msg %></label>
                  </div>
               <% } %>
            </div>

            <div class="div-form">
               <label for="country_id">Country</label>
               <Select name="country_id" id="country_id" class="control-form" >
                  <option value="">Select ...</option>
                  <% for(let i=0; i<countries.length; i++) { %>
                     <option value="<%= countries[i].id %>" <%= locals.oldData && oldData.country_id == countries[i].id ? 'selected' : null %>><%= countries[i].name %></option>
                  <% } %>
               </Select>
               <% if (locals.errors && errors.country_id) { %>
                  <div class="text-danger">
                     <label><%= errors.country_id.msg %></label>
                  </div>
               <% } %>
            </div>

            <div>
               <label>Categories of interes</label>
               <br>
               <% for(let i=0; i<categories.length; i++) { %>
                  <input type="checkbox" name="categories" value="<%= categories[i].id %>" id="<%= categories[i].name %>" <%= locals.oldData?.categories && oldData.categories?.includes(String(categories[i].id)) ? 'checked' : null %>>
                  <label><%= categories[i].name %></label><br>
               <% } %>
               <% if (locals.errors && errors.categories) { %>
                  <div class="text-danger">
                     <label><%= errors.categories.msg %></label>
                  </div>
               <% } %>
            </div>

            <br>

            <div class="div-form">
               <label for="img_profile">Upload an image profile (formats png, jpeg, and jpg allowed)</label>
               <input type="file" name="img_profile" id="img_profile" class="control-form" accept="image/png, image/jpeg, image/jpg">
               <% if (locals.errors && errors.img_profile) { %>
                  <div class="text-danger">
                     <label><%= errors.img_profile.msg %></label>
                  </div>
               <% } %>
            </div>

            <br>

            <div class="div-form">
               <label for="password">Password</label>
               <input type="password" name="password" id="password" class="control-form" >
               <% if (locals.errors && errors.password) { %>
                  <div class="text-danger">
                     <label><%= errors.password.msg %></label>
                  </div>
               <% } %>
            </div>

            <div class="div-form">
               <label for="repassword">Confirm your password</label>
               <input type="password" name="repassword" id="repassword" class="control-form" >
               <% if (locals.errors && errors.repassword) { %>
                  <div class="text-danger">
                     <label><%= errors.repassword.msg %></label>
                  </div>
               <% } %>
            </div>

            <div>
               <button type="submit" class="botton-form">Register</button>
               <button type="reset" class="botton-form">Reset</button>
            </div>

         </form>
      </div>

   </div>

   <!-- Footer -->
   <%- include("../partials/footer")%>

</body>
</html>